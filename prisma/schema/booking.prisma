model Booking {
  id String @id @default(uuid())

  turfProfileId String
  turf          TurfProfile @relation(fields: [turfProfileId], references: [id])

  turfFieldId String
  turfField   TurfField @relation(fields: [turfFieldId], references: [id])

  userId String? // global user (promoted or owner)
  user   User?   @relation(fields: [userId], references: [id])

  turfUserId String? // turf-specific user
  turfUser   TurfUser? @relation(fields: [turfUserId], references: [id])

  startTime DateTime
  endTime   DateTime

  paymentStatus PaymentStatus @default(PENDING)
  paymentAmount Int?

  status BookingStatus @default(PENDING)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  payment   Payment?

  @@unique([turfFieldId, startTime, endTime])
}

model Payment {
  id        String  @id @default(uuid())
  bookingId String  @unique
  booking   Booking @relation(fields: [bookingId], references: [id])

  amount     Int
  provider   String?
  providerPaymentStatus String?
  providerPaymentId     String?
  providerResponse Json?
  amountPaid Int?
  status     PaymentStatus @default(PENDING)
  payerId    String?
  payerName  String?
  payerEmail String?
  trxId      String? // transaction id from payment gateway

  createdAt DateTime @default(now())
  paidAt    DateTime?
}

model Bkash {
  id        Int      @id @default(autoincrement())
  authToken String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
